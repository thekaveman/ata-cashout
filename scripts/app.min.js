!function(){"use strict";angular.module("ataCashout.hours",[])}(),function(){"use strict";function a(a){function b(b){return Math.floor(b/a)}function c(b){return b*a}return{toWholeDays:b,toHours:c}}angular.module("ataCashout.hours").value("HoursInDay",8).factory("DayHours",["HoursInDay",a])}(),function(){"use strict";angular.module("ataCashout.members",[])}(),function(){"use strict";function a(){return{restrict:"E",scope:{member:"="},templateUrl:"members/accrualsPanel.html"}}angular.module("ataCashout.members").directive("accrualsPanel",a)}(),function(){"use strict";function a(){function a(){return{payRate:0,serviceYears:0,accrued:{holiday:0,personal:0,sick:0,vacation:0},used:{sick:0}}}function b(b){var c=a();return b=b||{},b.hasOwnProperty("payRate")||(b.payRate=c.payRate),b.hasOwnProperty("serviceYears")||(b.serviceYears=c.payRate),b.accrued=angular.extend({},c.accrued,b.accrued),b.used=angular.extend({},c.used,b.used),b}return{default:a,initialize:b}}angular.module("ataCashout.members").factory("Members",a)}(),function(){"use strict";angular.module("ataCashout.holiday",["ataCashout.members"])}(),function(){"use strict";angular.module("ataCashout.personal",["ataCashout.hours","ataCashout.members"])}(),function(){"use strict";angular.module("ataCashout.results",[])}(),function(){"use strict";angular.module("ataCashout.salaries",["ui.select"])}(),function(){"use strict";angular.module("ataCashout.sick",["ataCashout.hours","ataCashout.members"])}(),function(){"use strict";angular.module("ataCashout.vacation",["ataCashout.hours","ataCashout.members"])}(),function(){"use strict";angular.module("ataCashout.calculator",["ataCashout.holiday","ataCashout.members","ataCashout.personal","ataCashout.results","ataCashout.salaries","ataCashout.sick","ataCashout.vacation"])}(),function(){"use strict";angular.module("ataCashout",["ataCashout.hours","ataCashout.members","ataCashout.salaries","ataCashout.holiday","ataCashout.personal","ataCashout.results","ataCashout.sick","ataCashout.vacation","ataCashout.calculator"])}(),function(){"use strict";function a(a,b,c,d,e){function f(){a.member.results=[],a.member.totals={banked:0,cashable:0,lost:0,member:a.member.current};var f=a.member.current,g=[b.evaluate(f),c.evaluate(f),d.evaluate(f),e.evaluate(f)];angular.forEach(g,function(b){b.member=a.member.current,a.member.results.push(b),a.member.totals.banked+=b.banked||0,a.member.totals.cashable+=b.cashable||0,a.member.totals.lost+=b.lost||0})}function g(){return a.member.results.length>0}function h(){a.member={current:{accrued:{}},results:[],totals:{}},a.$broadcast("reset")}a.calc={go:f,ready:g,reset:h},a.member={current:{accrued:{}},results:[],totals:{}}}angular.module("ataCashout.calculator").controller("CalculatorController",["$scope","HolidayCashout","PersonalCashout","SickCashout","VacationCashout",a])}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"calculator/cashoutCalculator.html"}}angular.module("ataCashout.calculator").directive("cashoutCalculator",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"calculator/introPanel.html"}}angular.module("ataCashout.calculator").directive("introPanel",a)}(),function(){"use strict";function a(a,b){function c(c){c=a.initialize(c);var d=Math.min(c.accrued.holiday,b),e=c.accrued.holiday-d;return{accrued:c.accrued.holiday,cashable:d,lost:e,notes:{cashable:[{show:c.accrued.holiday>=b,text:"Maximum "+b+" Holiday / Floating Holiday hours are cashable"}]},panel:{heading:"Holiday / Floating Holiday",id:"holiday"}}}return{evaluate:c}}angular.module("ataCashout.holiday").value("CashableHolidayHours",8).factory("HolidayCashout",["Members","CashableHolidayHours",a])}(),function(){"use strict";function a(a,b){var c={cashable:a.toHours(5),carryover:a.toHours(3)};return[{minYears:0,maxYears:14,amounts:c},{minYears:15,maxYears:Number.MAX_VALUE,amounts:angular.extend({},c,{cashable:c.cashable+b})}]}function b(a,b){function c(b){b=a.initialize(b);var c=d(b.serviceYears),e=Math.min(c.cashable,b.accrued.personal),f=Math.min(c.carryover,b.accrued.personal-e),g=b.accrued.personal-e-f;return{accrued:b.accrued.personal,banked:f,cashable:e,lost:g,notes:{cashable:[{show:b.accrued.personal>=c.cashable,text:"Maximum "+c.cashable+" cashable Personal Leave hours"}],banked:[{show:g>0,text:"Maximum "+c.carryover+" Personal Leave hours carryover"}]},panel:{heading:"Personal Leave",id:"personal"}}}function d(a){for(var c={cashable:0,carryover:0},d=0;d<b.length;d++)if(b[d].minYears<=a&&a<=b[d].maxYears){c=b[d].amounts;break}return c}return{evaluate:c}}angular.module("ataCashout.personal").value("ProfessionalIncentiveHours",8).factory("PersonalCashoutAmounts",["DayHours","ProfessionalIncentiveHours",a]).factory("PersonalCashout",["Members","PersonalCashoutAmounts",b])}(),function(){"use strict";function a(){return{restrict:"E",scope:{result:"="},controller:"BankedController",templateUrl:"results/banked.html"}}function b(a,b){a.hours=function(){return a.result.banked},a.amount=function(){return b(a.hours()*a.result.member.payRate,2)},a.notes=function(){var b=a.result.notes;return b.banked?b.banked.filter(function(a){return a.show}):[]},a.show={banked:function(){return a.hours()>0},notes:function(){return a.notes().length>0}}}angular.module("ataCashout.results").directive("banked",a).controller("BankedController",["$scope","numberFilter",b])}(),function(){"use strict";function a(){return{restrict:"E",scope:{result:"="},controller:"CashableController",templateUrl:"results/cashable.html"}}function b(a,b){a.hours=function(){return a.result.cashable},a.amount=function(){return b(a.hours()*a.result.member.payRate,2)},a.notes=function(){var b=a.result.notes;return b.cashable?b.cashable.filter(function(a){return a.show}):[]},a.show={hours:function(){return a.hours()>0},notes:function(){return a.notes().length>0}}}angular.module("ataCashout.results").directive("cashable",a).controller("CashableController",["$scope","numberFilter",b])}(),function(){"use strict";function a(){return{restrict:"E",scope:{result:"="},controller:"LostController",templateUrl:"results/lost.html"}}function b(a,b){a.hours=function(){return a.result.lost||0},a.amount=function(){return b(a.hours()*a.result.member.payRate,2)},a.notes=function(){var b=a.result.notes;return b.lost?b.lost.filter(function(a){return a.show}):[]},a.show={lost:function(){return a.hours()>0},notes:function(){return a.notes().length>0}}}angular.module("ataCashout.results").directive("lost",a).controller("LostController",["$scope","numberFilter",b])}(),function(){"use strict";function a(){return{restrict:"E",scope:{result:"="},controller:"ResultPanelController",templateUrl:"results/resultPanel.html"}}function b(a){a.cols={cashable:{class:function(){return"col-md-"+a.cols.cashable.number()},number:function(){return a.result.banked>0||a.result.lost>0?5:8}},noncashable:{class:function(){return a.cols.noncashable.number()>0?"col-md-"+a.cols.noncashable.number():null},number:function(){return a.result.banked>0||a.result.lost>0?12-a.cols.cashable.number():0}}}}angular.module("ataCashout.results").directive("resultPanel",a).controller("ResultPanelController",["$scope",b])}(),function(){"use strict";function a(){return{restrict:"E",scope:{member:"=",totals:"="},controller:"TotalsPanelController",templateUrl:"results/totalsPanel.html"}}function b(a,b){a.hours={cashable:function(){return a.totals&&a.totals.cashable?a.totals.cashable:0}},a.amounts={cashable:function(){return b(a.hours.cashable()*a.member.payRate,2)}}}angular.module("ataCashout.results").directive("totalsPanel",a).controller("TotalsPanelController",["$scope","numberFilter",b])}(),function(){"use strict";angular.module("ataCashout.salaries").value("DataUrl","https://api.github.com/repos/CityofSantaMonica/SalarySchedules.Client/contents/data")}(),function(){"use strict";function a(){return function(a){if(null==a||0==a.length)return null;a.sort(function(a,b){return a.code<b.code?-1:a.code>b.code?1:0});var b=a.length-1,c=new Date;if(c.getMonth()>=6)return a[b];for(var d=[c.getFullYear()-2001,c.getFullYear()-2e3].join(""),e=b;e>=0;e--)if(a[e].code===d)return a[e];return a[b]}}function b(){return function(a){var b=[];return angular.forEach(a,function(a){var c=/(\d{2})-(\d{2}).*\.json/gi.exec(a.name);if(c){var d=c.slice(1,3);b.push({code:d.join(""),fy:"FY "+d.join("/"),name:a.name})}}),b}}function c(a,b,c,d){function e(){return a.get(b,{cache:!0}).then(function(a){var b=c(a.data);return d(b)})}return{findClosest:e}}angular.module("ataCashout.salaries").filter("ClosestFiscalYear",a).filter("DataFile",b).factory("FiscalYears",["$http","DataUrl","DataFileFilter","ClosestFiscalYearFilter",c])}(),function(){"use strict";function a(){return function(a,b){return(a||[]).filter(function(a){return!(!a||!a.BargainingUnit||a.BargainingUnit.Code!==b)})}}function b(a){function b(b){var c=a.atob(b);return angular.fromJson(c).JobClasses||[]}return{decode:b}}function c(a,b,c,d){function e(e){var f=[b,e].join("/");return a.get(f,{cache:!0}).then(function(a){var b=c.decode(a.data.content);return d(b,"ATA")})}return{getAll:e}}function d(a,b,c){function d(){return!!a.jobPanel.selectedJob}function e(b,c){a.member.payRate=void 0}a.jobPanel={jobs:[],selectedJob:void 0,hasSelection:d,onJobSelect:e},a.$on("reset",function(b){a.jobPanel.selectedJob=void 0})}function e(){return{restrict:"E",scope:{member:"="},controller:"JobPanelController",templateUrl:"salaries/jobPanel.html"}}angular.module("ataCashout.salaries").filter("BargainingUnit",a).factory("JobsDecoder",["$window",b]).factory("JobClasses",["$http","DataUrl","JobsDecoder","BargainingUnitFilter",c]).controller("JobPanelController",["$scope","FiscalYears","JobClasses",d]).directive("jobPanel",e)}(),function(){"use strict";function a(){return[{minYears:1,maxYears:9,days:[6,6,6,5,4,3,2,1]},{minYears:10,maxYears:Number.MAX_VALUE,days:[12,12,12,11,10,9,8,7,6,5,4,3,2,1]}]}function b(a){return{minBalance:a.toHours(12)}}function c(a,b,c,d){function e(a){a=b.initialize(a);var c=a.accrued.sick<d.minBalance?0:f(a.serviceYears,a.used.sick),e=a.accrued.sick-c;return{accrued:a.accrued.sick,cashable:Math.min(c,a.accrued.sick),banked:e,notes:{cashable:[{show:a.accrued.sick<d.minBalance,text:"Minimum "+d.minBalance+" hour balance to cash out."},{show:a.serviceYears>0&&a.accrued.sick>=d.minBalance&&a.accrued.sick>=c,text:"Maximum "+c+" cashable Sick hours"},{show:a.serviceYears<h(),text:"Must have at least "+h()+" service year"}]},panel:{heading:"Sick",id:"sick"}}}function f(a,b){for(var d=0,e=0;e<c.length;e++)if(c[e].minYears<=a&&a<=c[e].maxYears){d=g(c[e].days,b);break}return d}function g(b,c){var d=a.toWholeDays(c);if(d<b.length){var e=b[d];return a.toHours(e)}return 0}function h(){for(var a=c[0].minYears,b=1;b<c.length;b++)c[b].minYears<a&&(a=c[b].minYears);return a}return{evaluate:e}}angular.module("ataCashout.sick").factory("SickCashoutAmounts",a).factory("SickCashoutBank",["DayHours",b]).factory("SickCashout",["DayHours","Members","SickCashoutAmounts","SickCashoutBank",c])}(),function(){"use strict";function a(){return[{minYears:0,maxYears:4,amount:40},{minYears:5,maxYears:Number.MAX_VALUE,amount:80}]}function b(){return{deadline:{month:11,day:31},paydate:{month:6,day:1}}}function c(a,b,c,d){function e(a){a=b.initialize(a);var c=f(a.serviceYears),e=Math.min(c,a.accrued.vacation),h=a.accrued.vacation-e,i=(new Date).getFullYear(),j=new Date(i,d.deadline.month,d.deadline.day).toLocaleDateString("en-US",g),k=new Date(i+1,d.paydate.month,d.paydate.day).toLocaleDateString("en-US",g);return{accrued:a.accrued.vacation,cashable:e,banked:h,notes:{cashable:[{show:a.accrued.vacation>c,text:"Maximum "+c+" cashable Vacation hours"},{show:e>0,text:"Elect by "+j+" for cashout on or after "+k}]},panel:{heading:"Vacation",id:"vacation"}}}function f(a){var b=c.filter(function(b){return b.minYears<=a&&a<=b.maxYears});return 1==b.length?b[0].amount:0}return{evaluate:e};var g}angular.module("ataCashout.vacation").factory("VacationCashoutAmounts",a).factory("VacationCashoutElection",b).factory("VacationCashout",["DayHours","Members","VacationCashoutAmounts","VacationCashoutElection",c])}();